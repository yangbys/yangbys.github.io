<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <title>数字特效</title>
    <style>
    .mc-hd-c {padding:5px 0; font-size:16px; overflow: hidden}
    .mc-hd-c .sjNum,.mc-hd-c .priceNum {display: inline-block; height: 20px; padding:0 5px; vertical-align: -4px; *vertical-align: 0;}
    .mc-hd-c .sjNum i,.mc-hd-c .priceNum i {height:20px; width: 12px; display: inline-block; overflow: hidden; }
    .mc-hd-c .sjNum i {background: url(img/number2.png) repeat-y;}
    .mc-hd-c .priceNum i {background: url(img/number1.png) repeat-y;}

    </style>
<body>

    <div class="mc-hd-c">
		当前已有上百家商户使用,每月为商户处理采购款
        <span class="sjNum" data-num='3000'></span>
        万，累计为商家节省成本超过
		<span class="priceNum" data-num='340'></span>万
	</div>


	<script src="../loadImg/jquery.js"></script>
    <script src="animateBackground-plugin.js"></script>
    <script src="jquery.easing.1.3.min.js"></script>
	<script>

    var sj = $('.sjNum'),
        price = $('.priceNum'),
        dataNum1 = sj.data('num'),
        dataNum2 = price.data('num');

        setNum(sj,dataNum1)
        setNum(price,dataNum2)

        function setNum(obj,num){
            //console.log('Nub',num)
            var numArr=num.toString().split('');
            var html='';
            for(var i=0; i<numArr.length; i++){
                html +='<i></i>';
            }
            obj.html(html);
            var span=obj.children('i');
            var h=20;
            var m=12;
            $.each(span,function(i,n){
                setTimeout(function(){
                    $(n).animate(
                        {backgroundPosition:"0 "+(-h*m*10 - h*numArr[i])+"px"},
                        {
                            duration:2000+i*500,
                            easing: 'easeOutElastic',
                            complete:function(){
                                if(i==numArr.length-1){
                                    //console.log('end')
                                }
                            }
                        }
                    )
                },i*500)
            })
        }

	</script>
</body>
</html>
